###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.30.1.53127/W32 for ARM     11/Nov/2014  19:25:05 #
# Copyright 1999-2011 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Libraries\AMT_Drivers\CS5346\cs5346.c                 #
#    Command line =  C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Libraries\AMT_Drivers\CS5346\cs5346.c -D S4051A -D    #
#                    DEBUG -D FREE_RTOS -D STM32F40_41xxx -D                  #
#                    USE_STM324xG_EVAL -D USE_STDPERIPH_DRIVER -D             #
#                    __ARM_CORTEX_MX__ -D IAR_ARM_CM4F -D USE_USB_OTG_FS      #
#                    -lcN C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\De #
#                    vCode\2\Projects\S4051A\EWARM\..\Output\S4051A\Applicati #
#                    on\List\ -o C:\Users\tony.tsou\Desktop\AmTRAN\Projects\1 #
#                    5_K2\DevCode\2\Projects\S4051A\EWARM\..\Output\S4051A\Ap #
#                    plication\Obj\ --debug --endian=little --cpu=Cortex-M4   #
#                    -e --fpu=VFPv4_sp --dlib_config "C:\Program Files        #
#                    (x86)\IAR Systems\Embedded Workbench                     #
#                    6.0\arm\INC\c\DLib_Config_Normal.h" -I                   #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\inc\ -I                         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\App_SRC\ -I                  #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\App_SRC\Include\ -I          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\App_SRC\SERVICES\ -I         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\App_SRC\SERVICES\USB_HD\inc\ #
#                     -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\Dev #
#                    Code\2\Projects\S4051A\EWARM\..\App_SRC\SERVICES\USB_HD\ #
#                    src\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2 #
#                    \DevCode\2\Projects\S4051A\EWARM\..\App_SRC\SERVICES\wav #
#                    ePlayer\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\1 #
#                    5_K2\DevCode\2\Projects\S4051A\EWARM\..\App_SRC\Managers #
#                    \ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\De #
#                    vCode\2\Projects\S4051A\EWARM\..\App_SRC\Dispatchers\    #
#                    -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevC #
#                    ode\2\Projects\S4051A\EWARM\..\..\..\Libraries\CMSIS\Inc #
#                    lude\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K #
#                    2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Libraries\CMS #
#                    IS\Device\ST\STM32F4xx\Include\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\STM32F4xx_St #
#                    dPeriph_Driver\inc\ -I C:\Users\tony.tsou\Desktop\AmTRAN #
#                    \Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\.. #
#                    \Libraries\FreeRTOS\Source\portable\IAR\ARM_CM4F\ -I     #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\FreeRTOS\Sou #
#                    rce\include\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projec #
#                    ts\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Librar #
#                    ies\FreeRTOS\Source\ -I C:\Users\tony.tsou\Desktop\AmTRA #
#                    N\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\. #
#                    .\Libraries\STM32_USB_OTG_Driver\inc\ -I                 #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\STM32_USB_De #
#                    vice_Library\Core\inc\ -I C:\Users\tony.tsou\Desktop\AmT #
#                    RAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\.. #
#                    \..\Libraries\STM32_USB_Device_Library\Class\cdc\inc\    #
#                    -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevC #
#                    ode\2\Projects\S4051A\EWARM\..\..\..\Libraries\STM32_USB #
#                    _HOST_Library\Core\inc\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\STM32_USB_HOST_Library\Class\MSC\inc\ -I  #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Utilities\Third_Party\ #
#                    efsl\inc\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\ #
#                    15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Utilities #
#                    \Third_Party\fat_fs\inc\ -I                              #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Utilities\mainstream_v #
#                    1\stm32f411\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projec #
#                    ts\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Utilit #
#                    ies\mainstream_v1\stm32f411\it\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    EXT_FLASH\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects #
#                    \15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Librarie #
#                    s\AMT_Drivers\TAS5727\ -I C:\Users\tony.tsou\Desktop\AmT #
#                    RAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\.. #
#                    \..\Libraries\AMT_Drivers\TAS5711\ -I                    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    TAS5707\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\1 #
#                    5_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Libraries\ #
#                    AMT_Drivers\TAS5713\ -I C:\Users\tony.tsou\Desktop\AmTRA #
#                    N\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\. #
#                    .\Libraries\AMT_Drivers\CS49844\ -I                      #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    CS8422\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15 #
#                    _K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Libraries\A #
#                    MT_Drivers\CS5346\ -I C:\Users\tony.tsou\Desktop\AmTRAN\ #
#                    Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\ #
#                    Libraries\AMT_Drivers\OTI3368\ -I                        #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    HT68F30\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\1 #
#                    5_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Libraries\ #
#                    AMT_Drivers\BTM640\ -I C:\Users\tony.tsou\Desktop\AmTRAN #
#                    \Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\.. #
#                    \Libraries\AMT_Drivers\sii953x\application\ -I           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_ipv\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_cbus\ -I                         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_cdc\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_cec\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_arc\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_diag\ -I                         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_msw\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_osd\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\ -I C:\Users\tony.tsou\Desktop\AmTRAN\ #
#                    Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\ #
#                    Libraries\AMT_Drivers\sii953x\component\tx\ -I           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\repeater_avr\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\video_tables\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\audio_rx\ -I                           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\edid_tx\ -I                            #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\debugger_hdmigear\ -I                  #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\cbus\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\component\rtpi\ -I    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\cdc\ -I C:\Users\tony.tsou\Desktop\AmT #
#                    RAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\.. #
#                    \..\Libraries\AMT_Drivers\sii953x\component\cec_manager\ #
#                     -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\Dev #
#                    Code\2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Driv #
#                    ers\sii953x\component\thx\ -I                            #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\ipv\ -I C:\Users\tony.tsou\Desktop\AmT #
#                    RAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\.. #
#                    \..\Libraries\AMT_Drivers\sii953x\component\osd\ -I      #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\cec_switch\ -I                         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\cec_system_audio_control\ -I           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Pro #
#                    jects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Lib #
#                    raries\AMT_Drivers\sii953x\driver\audio_mix_drv\ -I      #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\sii953x_drv\ -I                           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\cra_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\matrix_sw_drv\ #
#                     -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\Dev #
#                    Code\2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Driv #
#                    ers\sii953x\driver\nvram_sram_drv\ -I                    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\tpi_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\audio_rx_drv\  #
#                    -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevC #
#                    ode\2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drive #
#                    rs\sii953x\driver\repeater_avr_drv\ -I                   #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\gpio_drv\ -I                              #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\tpg_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\cbus_drv\ -I   #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\cpi_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\arc_drv\ -I    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\osd_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\ipv_drv\ -I    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\hal\ir_remote\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\hal\eeprom\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\hal\timer\ -I                           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\hal\i2c\ -I                             #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\osal\timer\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\board\ -Ohz -I "C:\Program Files        #
#                    (x86)\IAR Systems\Embedded Workbench                     #
#                    6.0\arm\CMSIS\Include\"                                  #
#    List file    =  C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\Output\S4051A\Application\Li #
#                    st\cs5346.lst                                            #
#    Object file  =  C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\Output\S4051A\Application\Ob #
#                    j\cs5346.o                                               #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode\2\Libraries\AMT_Drivers\CS5346\cs5346.c
      1          #include "Debug.h"
      2          #include "CS5346.h"
      3          
      4          #define CS5346_CHIP_ID		0x01
      5          #define CS5346_POWER_CONTROL		0x02
      6          #define CS5346_ADC_CONTROL		0x04
      7          #define CS5346_MCLK_FREQUENCY		0x05
      8          #define CS5346_PGAOUT_CONTROL		 0x06
      9          #define CS5346_PGA_CH_B_GAIN_CONTROL	 0x07
     10          #define CS5346_PGA_CH_A_GAIN_CONTROL	 0x08
     11          #define CS5346_ANALOG_INPUT_CONTROL		 0x09
     12          #define CS5346_ACTIVE_LEVEL_CONTROL		0x0C
     13          #define CS5346_INTERRUPT_STATUS		0x0D
     14          #define CS5346_INTERRUPT_MASK		0x0E
     15          #define CS5346_INTERRUPT_MODE_MSB		0x0F
     16          #define CS5346_INTERRUPT_MODE_LSB		0x10
     17          
     18          //_____________________________________________________________________________________________________________________
     19          
     20          typedef enum ADC_OUTPUT_FORMAT
     21          {
     22              LEFT_JUSTIFIED,
     23              I2S
     24          } ENUM_ADC_OUTPUT_FORMAT;
     25          
     26          typedef enum ANALOG_INPUT
     27          {
     28          	ANALOG_INPUT_1,
     29          	ANALOG_INPUT_2,
     30          	ANALOG_INPUT_3,
     31          	ANALOG_INPUT_4,
     32          	ANALOG_INPUT_5,
     33          	ANALOG_INPUT_6
     34          } ENUM_ANALOG_INPUT;
     35          
     36          typedef enum DIVIDER
     37          {
     38          	DIVIDER_1,
     39          	DIVIDER_1_5,
     40          	DIVIDER_2,
     41          	DIVIDER_3,
     42          	DIVIDER_4
     43          } ENUM_DIVIDER;
     44          
     45          
     46          //_____________________________________________________________________________________________________________________
     47          static void CS5346_Initialize( void );
     48          
     49          static void CS5346_setInputPath ( uint8 input ) ;
     50          
     51          static void CS5346_set_AB_channels_gain( uint8 a_gain, uint8 b_gain );
     52          
     53          const ADC_CTRL_OBJECT ADC_ObjCtrl = 
     54          {
     55              CS5346_Initialize,
     56              CS5346_setInputPath,
     57              CS5346_set_AB_channels_gain,
     58          };
     59          const ADC_CTRL_OBJECT *pADC_ObjCtrl = &ADC_ObjCtrl;
     60          
     61          //_____________________________________________________________________________________________________________________
     62          void CS5346_PowerUpDown(uint8 bPower)
     63          {
     64          	uint8 val;
     65          
     66          	if( bPower == 1 )
     67          	{
     68                  val=0x00;
     69          	}
     70          	else
     71          	{	
     72                  val=0x01;
     73          	}
     74          	
     75          	CS5346_WriteI2C_Byte(CS5346_POWER_CONTROL,val);
     76          }
     77          
     78          void CS5346_Mute(uint8 bMute)
     79          {
     80              uint8 val;
     81          
     82              val = CS5346_ReadI2C_Byte(CS5346_ADC_CONTROL);	
     83          	
     84              val &= ~0x04;
     85          
     86          	if(bMute == 1)
     87          	{
     88                  val |= 0x04;
     89          	}
     90          	else
     91          	{
     92                  val |= 0x00;
     93          	}
     94          	
     95          	CS5346_WriteI2C_Byte(CS5346_ADC_CONTROL,val);
     96          
     97          }
     98          
     99          void CS5346_Select_Format(uint8 value)
    100          {
    101          	uint8 val;
    102          
    103          	val=CS5346_ReadI2C_Byte(CS5346_ADC_CONTROL);	
    104          	val &= ~0x10;
    105          
    106          	switch(value) 
    107          	{
    108          	  case LEFT_JUSTIFIED:
    109          		 val |= 0x00;
    110          		break;
    111          	  case I2S:
    112          		 val |= 0x10;
    113          		 break;
    114          	}
    115          	CS5346_WriteI2C_Byte(CS5346_ADC_CONTROL,val);
    116          
    117          }
    118          
    119          static void CS5346_set_AB_channels_gain( uint8 a_gain, uint8 b_gain )
    120          {
    121              CS5346_WriteI2C_Byte(CS5346_PGA_CH_A_GAIN_CONTROL, a_gain);
    122              CS5346_WriteI2C_Byte(CS5346_PGA_CH_B_GAIN_CONTROL, b_gain); 
    123          }
    124          
    125          static void CS5346_setInputPath ( uint8 input ) 
    126          {
    127              uint8 val = 0;
    128          	 
    129          	switch(input) 
    130          	{
    131                  case ANALOG_INPUT_1:
    132                      val=0x19;
    133                      break;
    134                      
    135          		case ANALOG_INPUT_2:
    136          			 val=0x1A;
    137          		    break;
    138                      
    139          		case ANALOG_INPUT_3:
    140          		   val=0x1B;
    141          		    break;
    142                      
    143          		case ANALOG_INPUT_4:
    144          		   val=0x1C;
    145          		    break;
    146                      
    147          		case ANALOG_INPUT_5:
    148          		   val=0x1D;
    149          		    break;
    150                      
    151          		case ANALOG_INPUT_6:
    152          		   val=0x1E;
    153          		    break;
    154          	  }
    155          	
    156          	CS5346_WriteI2C_Byte(CS5346_ANALOG_INPUT_CONTROL, val );
    157          
    158          }
    159          
    160          uint8 CS5346_input_status (void) 
    161          {
    162              uint8 val = 0;
    163              val = CS5346_ReadI2C_Byte(CS5346_ANALOG_INPUT_CONTROL);
    164          	 
    165              switch(val) 
    166              {
    167                  case 0x19:
    168                      return ANALOG_INPUT_1;//AUX2
    169                  break;
    170                  case 0x1A:
    171                      return ANALOG_INPUT_2;//
    172                  break;
    173                  case 0x1B:
    174                      return ANALOG_INPUT_3;//AUX1
    175                  break;
    176                  case 0x1C:
    177                      return ANALOG_INPUT_4;//BT
    178                  break;
    179                  case 0x1D:
    180                      return ANALOG_INPUT_5;
    181                  break;
    182                  case 0x1E:
    183                      return ANALOG_INPUT_6;//USB
    184                  break;
    185                  default:
    186                      return ANALOG_INPUT_2; /* S3851 input 2 is empty. Tony140110 */
    187                  break;
    188              }
    189          }
    190          
    191          void CS5346_Select_MASTER_SLAVE(uint8 value)
    192          {
    193          	uint8 val;
    194          
    195          	val=CS5346_ReadI2C_Byte(CS5346_ADC_CONTROL);	
    196          	val &= ~0x01;
    197          	 
    198          	switch(value) 
    199          	{
    200          	case 0:
    201          		val|=0x00;
    202          	break;
    203          	case 1:
    204          		val|=0x01;
    205          	break;
    206          	}
    207          
    208          	CS5346_WriteI2C_Byte(CS5346_ADC_CONTROL,val);
    209          	
    210          }
    211          void CS5346_Select_BCLK_SCLK(uint8 value)
    212          {
    213          	uint8 val;
    214          
    215          	val=CS5346_ReadI2C_Byte(CS5346_ADC_CONTROL);	
    216          	val &= ~0xC0;
    217          	 
    218          	switch(value) 
    219          	{
    220          	case 0:
    221          		val|=0x00;  //SSM
    222          	break;
    223          	case 1:
    224          		val|=0x40; //DSM
    225          	break;
    226          	case 2:
    227          		val|=0x80;  //QSM
    228          	break;
    229          	}
    230          
    231          	CS5346_WriteI2C_Byte(CS5346_ADC_CONTROL,val);
    232          }
    233          
    234          void CS5346_Select_Divider(uint8 value)
    235          {
    236          	uint8 val;
    237          
    238          	val=CS5346_ReadI2C_Byte(CS5346_MCLK_FREQUENCY);	
    239          	val &= ~0x70;
    240          	 
    241          	switch(value) 
    242          	{
    243          		case DIVIDER_1:
    244          			val|=0x00;
    245          		break;
    246          		case DIVIDER_1_5:
    247          			val|=0x10;
    248          		break;
    249          		case DIVIDER_2:
    250          			val|=0x20;
    251          		break;
    252          		case DIVIDER_3:
    253          			val|=0x30;
    254          		break;
    255          		case DIVIDER_4:
    256          			val|=0x40;
    257          		break;
    258          	}
    259          
    260          	CS5346_WriteI2C_Byte(CS5346_MCLK_FREQUENCY,val);
    261          	
    262          }
    263          
    264          static void CS5346_Initialize( void )
    265          {
    266              //
    267              // Send required startup commands, these are apparently required for ADC temperature stability
    268              //
    269          
    270              CS5346_PowerUpDown(0);
    271              CS5346_Mute(0);
    272              CS5346_setInputPath(ANALOG_INPUT_1);
    273          
    274              //0x00 ->0db , 0x06 ->3db
    275              CS5346_set_AB_channels_gain( 0x04, 0x04 );
    276          
    277              CS5346_Select_MASTER_SLAVE(0);
    278              CS5346_Select_Format(I2S);
    279              CS5346_Select_Divider(0);
    280              CS5346_PowerUpDown(1);
    281          }
    282          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
        8  CS5346_Initialize
             8 -> CS5346_Mute
             0 -> CS5346_PowerUpDown
             8 -> CS5346_PowerUpDown
             8 -> CS5346_Select_Divider
             8 -> CS5346_Select_Format
             8 -> CS5346_Select_MASTER_SLAVE
             8 -> CS5346_setInputPath
             8 -> CS5346_set_AB_channels_gain
        8  CS5346_Mute
             8 -> CS5346_ReadI2C_Byte
             0 -> CS5346_WriteI2C_Byte
        0  CS5346_PowerUpDown
             0 -> CS5346_WriteI2C_Byte
        8  CS5346_Select_BCLK_SCLK
             8 -> CS5346_ReadI2C_Byte
             0 -> CS5346_WriteI2C_Byte
        8  CS5346_Select_Divider
             8 -> CS5346_ReadI2C_Byte
             0 -> CS5346_WriteI2C_Byte
        8  CS5346_Select_Format
             8 -> CS5346_ReadI2C_Byte
             0 -> CS5346_WriteI2C_Byte
        8  CS5346_Select_MASTER_SLAVE
             8 -> CS5346_ReadI2C_Byte
             0 -> CS5346_WriteI2C_Byte
        8  CS5346_input_status
             8 -> CS5346_ReadI2C_Byte
        0  CS5346_setInputPath
             0 -> CS5346_WriteI2C_Byte
        8  CS5346_set_AB_channels_gain
             0 -> CS5346_WriteI2C_Byte
             8 -> CS5346_WriteI2C_Byte


   Section sizes:

   Bytes  Function/Label
   -----  --------------
      10  ?Subroutine0
       8  ?Subroutine1
      12  ADC_ObjCtrl
      54  CS5346_Initialize
      20  CS5346_Mute
      14  CS5346_PowerUpDown
      30  CS5346_Select_BCLK_SCLK
      60  CS5346_Select_Divider
      20  CS5346_Select_Format
      22  CS5346_Select_MASTER_SLAVE
      54  CS5346_input_status
      44  CS5346_setInputPath
      24  CS5346_set_AB_channels_gain
       4  pADC_ObjCtrl

 
   4 bytes in section .data
  12 bytes in section .rodata
 360 bytes in section .text
 
 360 bytes of CODE  memory
  12 bytes of CONST memory
   4 bytes of DATA  memory

Errors: none
Warnings: none
