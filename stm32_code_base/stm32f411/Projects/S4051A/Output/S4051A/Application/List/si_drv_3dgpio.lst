###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.30.1.53127/W32 for ARM     11/Nov/2014  19:23:27 #
# Copyright 1999-2011 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Libraries\AMT_Drivers\sii953x\driver\sii953x_drv\si_d #
#                    rv_3dgpio.c                                              #
#    Command line =  C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Libraries\AMT_Drivers\sii953x\driver\sii953x_drv\si_d #
#                    rv_3dgpio.c -D S4051A -D DEBUG -D FREE_RTOS -D           #
#                    STM32F40_41xxx -D USE_STM324xG_EVAL -D                   #
#                    USE_STDPERIPH_DRIVER -D __ARM_CORTEX_MX__ -D             #
#                    IAR_ARM_CM4F -D USE_USB_OTG_FS -lcN                      #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\Output\S4051A\Application\Li #
#                    st\ -o C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\ #
#                    DevCode\2\Projects\S4051A\EWARM\..\Output\S4051A\Applica #
#                    tion\Obj\ --debug --endian=little --cpu=Cortex-M4 -e     #
#                    --fpu=VFPv4_sp --dlib_config "C:\Program Files           #
#                    (x86)\IAR Systems\Embedded Workbench                     #
#                    6.0\arm\INC\c\DLib_Config_Normal.h" -I                   #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\inc\ -I                         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\App_SRC\ -I                  #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\App_SRC\Include\ -I          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\App_SRC\SERVICES\ -I         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\App_SRC\SERVICES\USB_HD\inc\ #
#                     -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\Dev #
#                    Code\2\Projects\S4051A\EWARM\..\App_SRC\SERVICES\USB_HD\ #
#                    src\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2 #
#                    \DevCode\2\Projects\S4051A\EWARM\..\App_SRC\SERVICES\wav #
#                    ePlayer\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\1 #
#                    5_K2\DevCode\2\Projects\S4051A\EWARM\..\App_SRC\Managers #
#                    \ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\De #
#                    vCode\2\Projects\S4051A\EWARM\..\App_SRC\Dispatchers\    #
#                    -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevC #
#                    ode\2\Projects\S4051A\EWARM\..\..\..\Libraries\CMSIS\Inc #
#                    lude\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K #
#                    2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Libraries\CMS #
#                    IS\Device\ST\STM32F4xx\Include\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\STM32F4xx_St #
#                    dPeriph_Driver\inc\ -I C:\Users\tony.tsou\Desktop\AmTRAN #
#                    \Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\.. #
#                    \Libraries\FreeRTOS\Source\portable\IAR\ARM_CM4F\ -I     #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\FreeRTOS\Sou #
#                    rce\include\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projec #
#                    ts\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Librar #
#                    ies\FreeRTOS\Source\ -I C:\Users\tony.tsou\Desktop\AmTRA #
#                    N\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\. #
#                    .\Libraries\STM32_USB_OTG_Driver\inc\ -I                 #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\STM32_USB_De #
#                    vice_Library\Core\inc\ -I C:\Users\tony.tsou\Desktop\AmT #
#                    RAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\.. #
#                    \..\Libraries\STM32_USB_Device_Library\Class\cdc\inc\    #
#                    -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevC #
#                    ode\2\Projects\S4051A\EWARM\..\..\..\Libraries\STM32_USB #
#                    _HOST_Library\Core\inc\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\STM32_USB_HOST_Library\Class\MSC\inc\ -I  #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Utilities\Third_Party\ #
#                    efsl\inc\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\ #
#                    15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Utilities #
#                    \Third_Party\fat_fs\inc\ -I                              #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Utilities\mainstream_v #
#                    1\stm32f411\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projec #
#                    ts\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Utilit #
#                    ies\mainstream_v1\stm32f411\it\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    EXT_FLASH\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects #
#                    \15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Librarie #
#                    s\AMT_Drivers\TAS5727\ -I C:\Users\tony.tsou\Desktop\AmT #
#                    RAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\.. #
#                    \..\Libraries\AMT_Drivers\TAS5711\ -I                    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    TAS5707\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\1 #
#                    5_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Libraries\ #
#                    AMT_Drivers\TAS5713\ -I C:\Users\tony.tsou\Desktop\AmTRA #
#                    N\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\. #
#                    .\Libraries\AMT_Drivers\CS49844\ -I                      #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    CS8422\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15 #
#                    _K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Libraries\A #
#                    MT_Drivers\CS5346\ -I C:\Users\tony.tsou\Desktop\AmTRAN\ #
#                    Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\ #
#                    Libraries\AMT_Drivers\OTI3368\ -I                        #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    HT68F30\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\1 #
#                    5_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Libraries\ #
#                    AMT_Drivers\BTM640\ -I C:\Users\tony.tsou\Desktop\AmTRAN #
#                    \Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\.. #
#                    \Libraries\AMT_Drivers\sii953x\application\ -I           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_ipv\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_cbus\ -I                         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_cdc\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_cec\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_arc\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_diag\ -I                         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_msw\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_osd\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\ -I C:\Users\tony.tsou\Desktop\AmTRAN\ #
#                    Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\ #
#                    Libraries\AMT_Drivers\sii953x\component\tx\ -I           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\repeater_avr\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\video_tables\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\audio_rx\ -I                           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\edid_tx\ -I                            #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\debugger_hdmigear\ -I                  #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\cbus\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\component\rtpi\ -I    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\cdc\ -I C:\Users\tony.tsou\Desktop\AmT #
#                    RAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\.. #
#                    \..\Libraries\AMT_Drivers\sii953x\component\cec_manager\ #
#                     -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\Dev #
#                    Code\2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Driv #
#                    ers\sii953x\component\thx\ -I                            #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\ipv\ -I C:\Users\tony.tsou\Desktop\AmT #
#                    RAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\.. #
#                    \..\Libraries\AMT_Drivers\sii953x\component\osd\ -I      #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\cec_switch\ -I                         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\cec_system_audio_control\ -I           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Pro #
#                    jects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Lib #
#                    raries\AMT_Drivers\sii953x\driver\audio_mix_drv\ -I      #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\sii953x_drv\ -I                           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\cra_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\matrix_sw_drv\ #
#                     -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\Dev #
#                    Code\2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Driv #
#                    ers\sii953x\driver\nvram_sram_drv\ -I                    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\tpi_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\audio_rx_drv\  #
#                    -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevC #
#                    ode\2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drive #
#                    rs\sii953x\driver\repeater_avr_drv\ -I                   #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\gpio_drv\ -I                              #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\tpg_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\cbus_drv\ -I   #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\cpi_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\arc_drv\ -I    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\osd_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\ipv_drv\ -I    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\hal\ir_remote\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\hal\eeprom\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\hal\timer\ -I                           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\hal\i2c\ -I                             #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\osal\timer\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\board\ -Ohz -I "C:\Program Files        #
#                    (x86)\IAR Systems\Embedded Workbench                     #
#                    6.0\arm\CMSIS\Include\"                                  #
#    List file    =  C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\Output\S4051A\Application\Li #
#                    st\si_drv_3dgpio.lst                                     #
#    Object file  =  C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\Output\S4051A\Application\Ob #
#                    j\si_drv_3dgpio.o                                        #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode\2\Libraries\AMT_Drivers\sii953x\driver\sii953x_drv\si_drv_3dgpio.c
      1          //***************************************************************************
      2          //!file     si_drv_3dgpio.c
      3          //!brief    Sii9535 driver 3D API.
      4          //
      5          // No part of this work may be reproduced, modified, distributed,
      6          // transmitted, transcribed, or translated into any language or computer
      7          // format, in any form or by any means without written permission of
      8          // Silicon Image, Inc., 1140 East Arques Avenue, Sunnyvale, California 94085
      9          //
     10          // Copyright 2012, Silicon Image, Inc.  All rights reserved.
     11          //***************************************************************************/
     12          
     13          #include "si_drv_internal.h"
     14          #include "si_gpio.h"
     15          #include "si_drv_gpio_internal.h"
     16          
     17          //-------------------------------------------------------------------------------------------------
     18          //! @brief      Enable/disable the GPIOs for 3D marker operation.  The marker parameters must
     19          //!             be configured prior to enabling the markers.  This function only controls the
     20          //!             GPIO pins, it does not affect 3D detection or VS insertion into data stream.
     21          //!             If the VS insertion feature is configured, the VS GPIO is enabled.  For disable,
     22          //!             all three GPIOs are disabled.
     23          //! @param[in]  enableFlags - bit 0: enable/disable the 3D GPIOs,
     24          //!                           bit 6: 0 - operate on MP
     25          //!                           bit 6: 1 - operate on RP
     26          //-------------------------------------------------------------------------------------------------
     27          void SiiDrvDevice3dMarkerGpioEnable ( uint8_t enableFlags )
     28          {
     29              uint16_t    sii3dGpios, siiPinModes;
     30          
     31              sii3dGpios  = (enableFlags & SET_SUBPIPE_OPTIONS) ?
     32                  (SII_GPIO_PIN_9 | SII_GPIO_PIN_11) : (SII_GPIO_PIN_1 | SII_GPIO_PIN_3);
     33              siiPinModes = (enableFlags & SET_SUBPIPE_OPTIONS) ?
     34                  (SII_GPIO_ALT_3D_RP_LEFT | SII_GPIO_ALT_3D_RP_RIGHT) :
     35                  (SII_GPIO_ALT_3D_MP_LEFT | SII_GPIO_ALT_3D_MP_RIGHT);
     36              if ( enableFlags & 0x01 )
     37              {
     38                  // Add in VS insertion if it is enabled
     39                  if ((( enableFlags & SET_SUBPIPE_OPTIONS) == 0) &&
     40                      ( SiiRegRead( REG_3D_MARKER_CTRL ) & BIT_EN_3D_VS_INSERT ))
     41                  {
     42                      sii3dGpios  |= SII_GPIO_PIN_2;
     43                      siiPinModes |= SII_GPIO_ALT_3D_MP_ACTIVE;
     44                  }
     45                  if (( enableFlags & SET_SUBPIPE_OPTIONS) &&
     46                      ( SiiRegRead( REG_3D_MARKER_CTRL_RP ) & BIT_EN_3D_VS_INSERT ))
     47                  {
     48                      sii3dGpios  |= SII_GPIO_PIN_10;
     49                      siiPinModes |= SII_GPIO_ALT_3D_RP_ACTIVE;
     50                  }
     51          
     52                  // Enable GPIOs as alternate outputs
     53                  SiiDrvGpioPinConfigure( sii3dGpios, SII_GPIO_OUTPUT );
     54                  SiiDrvGpioPinType( sii3dGpios, siiPinModes );
     55              }
     56              else
     57              {
     58                  // Always disable the VS GPIO
     59              	sii3dGpios  |= (( enableFlags & SET_SUBPIPE_OPTIONS) ? SII_GPIO_PIN_10 : SII_GPIO_PIN_2 );
     60          
     61                  // Disable 3D GPIOs.  Set them up as inputs so that they do not drain power.
     62                  SiiDrvGpioPinConfigure( sii3dGpios, SII_GPIO_INPUT );
     63                  SiiDrvGpioPinType( sii3dGpios, SII_GPIO_STANDARD );
     64              }
     65          }
     66          
     67          //-------------------------------------------------------------------------------------------------
     68          //! @brief      Configure the 3D marker operation parameters.
     69          //! @note       Only updates settings if ENABLE_3D_MARKER_SUPPORT is specified.
     70          //-------------------------------------------------------------------------------------------------
     71          void SiiDrvDevice3dMarkerConfigure( uint16_t optionFlags, uint16_t markerDelay720p, uint16_t markerDelay1080p )
     72          {
     73              uint8_t     detectBits, delay, saveOppositeState;
     74              SiiReg_t    markerCtrlReg, oppositeReg;
     75          
     76              markerCtrlReg   = (optionFlags & SET_SUBPIPE_OPTIONS) ? REG_3D_MARKER_CTRL_RP : REG_3D_MARKER_CTRL;
     77              oppositeReg     = (optionFlags & SET_SUBPIPE_OPTIONS) ? REG_3D_MARKER_CTRL : REG_3D_MARKER_CTRL_RP;
     78          
     79              // Disable while updating delay values.
     80              SiiRegBitsSet( markerCtrlReg, BIT_EN_3D_MARKER_SUPPORT, false );
     81              saveOppositeState = SiiRegRead( oppositeReg );
     82              SiiRegBitsSet( oppositeReg, BIT_EN_3D_MARKER_SUPPORT, false );
     83          
     84                  // Update delay values
     85                  SiiRegWrite( REG_3D_720P_MARKER_DLY_LO, (uint8_t)markerDelay720p );
     86                  delay = 0xA0 | ((markerDelay720p >> 8) & 0x0F);     // Add in the mandated reserved bits in [7:4]
     87                  SiiRegWrite( REG_3D_720P_MARKER_DLY_HI, delay );
     88                  SiiRegWrite( REG_3D_1080P_MARKER_DLY_LO, (uint8_t)markerDelay1080p );
     89          
     90              // 1080p HI byte also includes a 3D detect flag...
     91              delay = (optionFlags & SET_SUBPIPE_OPTIONS) ? BIT_SKIP_3D_STRUCT_CHK_RP : BIT_SKIP_3D_STRUCT_CHK_MP;
     92              delay = BIT_ENABLE_300MHZ_3D_SUPPORT | ((optionFlags & DISABLE_PACKED_FORMAT_CHK) ? delay : 0);
     93              delay |= ((markerDelay1080p >> 8) & 0x0F);
     94              SiiRegWrite( REG_3D_1080P_MARKER_DLY_HI, delay );
     95          
     96              // Configure the packet recognition logic
     97              detectBits  =   (optionFlags & DISABLE_VSIF_PACKET_CHK) ? BIT_SKIP_VSI_HEADER_CHK : 0;
     98              detectBits  |=  (optionFlags & DISABLE_IEEE_PACKET_CHK) ? BIT_SKIP_IEEE_ID_CHK : 0;
     99              detectBits  |=  (optionFlags & DISABLE_3D_FORMAT_CHK) ? BIT_SKIP_HDMI_3D_FORMAT_CHK : 0;
    100              detectBits  |=  (optionFlags & INSERT_3D_VS) ? BIT_EN_3D_VS_INSERT : 0;
    101              SiiRegModify(
    102                  markerCtrlReg,
    103                  BIT_SKIP_VSI_HEADER_CHK | BIT_SKIP_IEEE_ID_CHK | BIT_SKIP_HDMI_3D_FORMAT_CHK | BIT_EN_3D_VS_INSERT,
    104                  detectBits
    105                  );
    106          
    107              // Ensure that the main 3D detection logic for 3D IEEE packets is enabled.  Although this
    108              // does not directly enable the 3D markers, it is required for the port processor to
    109              // capture 3D packets of any type, so that the marker logic can filter frame-packed
    110              // packets from the 3D packets. Also enable the VSI buffer to automatically clear after
    111              // 2 or 4 frames are received without a 3D packet.
    112              if ( optionFlags & ENABLE_3D_MARKER_SUPPORT )
    113              {
    114                  SiiRegBitsSet( REG_CLR_PACKET_BUFFER, BIT_VSI_ID_CHK_EN | BIT_VSI_CLR_EN, true );
    115              }
    116          
    117              // Enable/disable markers as requested
    118              SiiRegBitsSet( markerCtrlReg, BIT_EN_3D_MARKER_SUPPORT, (( optionFlags & ENABLE_3D_MARKER_SUPPORT ) != 0 ));
    119          
    120              // Restore state of opposite set of markers
    121              SiiRegWrite( oppositeReg, saveOppositeState );
    122          }
    123          
    124          //-------------------------------------------------------------------------------------------------
    125          //! @brief      Return current state of hardware 3D marker controls.
    126          //-------------------------------------------------------------------------------------------------
    127          void SiiDrvDeviceGet3dMarkerConfiguration( uint16_t *pOptionFlags, uint16_t *pMarkerDelay720p, uint16_t *pMarkerDelay1080p )
    128          {
    129              uint8_t     detectBits;
    130              uint16_t    flags, delay;
    131              SiiReg_t    markerCtrlReg;
    132          
    133              markerCtrlReg   = (*pOptionFlags & SET_SUBPIPE_OPTIONS) ? REG_3D_MARKER_CTRL_RP : REG_3D_MARKER_CTRL;
    134          
    135              detectBits = SiiRegRead( markerCtrlReg );
    136              flags = (detectBits & BIT_SKIP_VSI_HEADER_CHK) ? DISABLE_VSIF_PACKET_CHK : 0;
    137              flags |= (detectBits & BIT_SKIP_IEEE_ID_CHK) ? DISABLE_IEEE_PACKET_CHK : 0;
    138              flags |= (detectBits & BIT_SKIP_HDMI_3D_FORMAT_CHK) ? DISABLE_3D_FORMAT_CHK : 0;
    139              flags |= (detectBits & BIT_EN_3D_MARKER_SUPPORT) ? ENABLE_3D_MARKER_SUPPORT : 0;
    140              flags |= (detectBits & BIT_EN_3D_VS_INSERT) ? INSERT_3D_VS : 0;
    141          
    142              // Packed format check bit for both pipes is in the same register
    143              if (*pOptionFlags & SET_SUBPIPE_OPTIONS)
    144              {
    145                  flags |= (SiiRegRead( REG_3D_1080P_MARKER_DLY_HI ) & BIT_SKIP_3D_STRUCT_CHK_RP) ? DISABLE_PACKED_FORMAT_CHK : 0;
    146              }
    147              else
    148              {
    149                  flags |= (SiiRegRead( REG_3D_1080P_MARKER_DLY_HI ) & BIT_SKIP_3D_STRUCT_CHK_MP) ? DISABLE_PACKED_FORMAT_CHK : 0;
    150              }
    151              *pOptionFlags = flags;
    152          
    153              delay = SiiRegRead( REG_3D_720P_MARKER_DLY_HI ) & 0x0F;
    154              delay = (delay << 8) | SiiRegRead( REG_3D_720P_MARKER_DLY_LO );
    155              *pMarkerDelay720p = delay;
    156          
    157              delay = SiiRegRead( REG_3D_1080P_MARKER_DLY_HI ) & 0x0F;
    158              delay = (delay << 8) | SiiRegRead( REG_3D_1080P_MARKER_DLY_LO );
    159              *pMarkerDelay1080p = delay;
    160          }
    161          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       32  SiiDrvDevice3dMarkerConfigure
             32 -> SiiRegBitsSet
             32 -> SiiRegModify
             32 -> SiiRegRead
              0 -> SiiRegWrite
             32 -> SiiRegWrite
       16  SiiDrvDevice3dMarkerGpioEnable
             16 -> SiiDrvGpioPinConfigure
              0 -> SiiDrvGpioPinType
             16 -> SiiRegRead
       24  SiiDrvDeviceGet3dMarkerConfiguration
             24 -> SiiRegRead


   Section sizes:

   Bytes  Function/Label
   -----  --------------
     222  SiiDrvDevice3dMarkerConfigure
     120  SiiDrvDevice3dMarkerGpioEnable
     162  SiiDrvDeviceGet3dMarkerConfiguration

 
 504 bytes in section .text
 
 504 bytes of CODE memory

Errors: none
Warnings: 2
