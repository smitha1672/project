###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.30.1.53127/W32 for ARM     11/Nov/2014  19:21:03 #
# Copyright 1999-2011 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Libraries\AMT_Drivers\TAS5711\TAS5711.c               #
#    Command line =  C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Libraries\AMT_Drivers\TAS5711\TAS5711.c -D S4051A -D  #
#                    DEBUG -D FREE_RTOS -D STM32F40_41xxx -D                  #
#                    USE_STM324xG_EVAL -D USE_STDPERIPH_DRIVER -D             #
#                    __ARM_CORTEX_MX__ -D IAR_ARM_CM4F -D USE_USB_OTG_FS      #
#                    -lcN C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\De #
#                    vCode\2\Projects\S4051A\EWARM\..\Output\S4051A\Applicati #
#                    on\List\ -o C:\Users\tony.tsou\Desktop\AmTRAN\Projects\1 #
#                    5_K2\DevCode\2\Projects\S4051A\EWARM\..\Output\S4051A\Ap #
#                    plication\Obj\ --debug --endian=little --cpu=Cortex-M4   #
#                    -e --fpu=VFPv4_sp --dlib_config "C:\Program Files        #
#                    (x86)\IAR Systems\Embedded Workbench                     #
#                    6.0\arm\INC\c\DLib_Config_Normal.h" -I                   #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\inc\ -I                         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\App_SRC\ -I                  #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\App_SRC\Include\ -I          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\App_SRC\SERVICES\ -I         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\App_SRC\SERVICES\USB_HD\inc\ #
#                     -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\Dev #
#                    Code\2\Projects\S4051A\EWARM\..\App_SRC\SERVICES\USB_HD\ #
#                    src\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2 #
#                    \DevCode\2\Projects\S4051A\EWARM\..\App_SRC\SERVICES\wav #
#                    ePlayer\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\1 #
#                    5_K2\DevCode\2\Projects\S4051A\EWARM\..\App_SRC\Managers #
#                    \ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\De #
#                    vCode\2\Projects\S4051A\EWARM\..\App_SRC\Dispatchers\    #
#                    -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevC #
#                    ode\2\Projects\S4051A\EWARM\..\..\..\Libraries\CMSIS\Inc #
#                    lude\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K #
#                    2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Libraries\CMS #
#                    IS\Device\ST\STM32F4xx\Include\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\STM32F4xx_St #
#                    dPeriph_Driver\inc\ -I C:\Users\tony.tsou\Desktop\AmTRAN #
#                    \Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\.. #
#                    \Libraries\FreeRTOS\Source\portable\IAR\ARM_CM4F\ -I     #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\FreeRTOS\Sou #
#                    rce\include\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projec #
#                    ts\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Librar #
#                    ies\FreeRTOS\Source\ -I C:\Users\tony.tsou\Desktop\AmTRA #
#                    N\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\. #
#                    .\Libraries\STM32_USB_OTG_Driver\inc\ -I                 #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\STM32_USB_De #
#                    vice_Library\Core\inc\ -I C:\Users\tony.tsou\Desktop\AmT #
#                    RAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\.. #
#                    \..\Libraries\STM32_USB_Device_Library\Class\cdc\inc\    #
#                    -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevC #
#                    ode\2\Projects\S4051A\EWARM\..\..\..\Libraries\STM32_USB #
#                    _HOST_Library\Core\inc\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\STM32_USB_HOST_Library\Class\MSC\inc\ -I  #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Utilities\Third_Party\ #
#                    efsl\inc\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\ #
#                    15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Utilities #
#                    \Third_Party\fat_fs\inc\ -I                              #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Utilities\mainstream_v #
#                    1\stm32f411\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projec #
#                    ts\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Utilit #
#                    ies\mainstream_v1\stm32f411\it\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    EXT_FLASH\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects #
#                    \15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Librarie #
#                    s\AMT_Drivers\TAS5727\ -I C:\Users\tony.tsou\Desktop\AmT #
#                    RAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\.. #
#                    \..\Libraries\AMT_Drivers\TAS5711\ -I                    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    TAS5707\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\1 #
#                    5_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Libraries\ #
#                    AMT_Drivers\CS49844\ -I C:\Users\tony.tsou\Desktop\AmTRA #
#                    N\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\. #
#                    .\Libraries\AMT_Drivers\CS8422\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    CS5346\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15 #
#                    _K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Libraries\A #
#                    MT_Drivers\OTI3368\ -I C:\Users\tony.tsou\Desktop\AmTRAN #
#                    \Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\.. #
#                    \Libraries\AMT_Drivers\HT68F30\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    BTM640\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15 #
#                    _K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Libraries\A #
#                    MT_Drivers\sii953x\application\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_ipv\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_cbus\ -I                         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_cdc\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_cec\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_arc\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_diag\ -I                         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_msw\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\application\app_osd\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\ -I C:\Users\tony.tsou\Desktop\AmTRAN\ #
#                    Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\ #
#                    Libraries\AMT_Drivers\sii953x\component\tx\ -I           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\repeater_avr\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\video_tables\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\audio_rx\ -I                           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\edid_tx\ -I                            #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\debugger_hdmigear\ -I                  #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\cbus\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\component\rtpi\ -I    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\cdc\ -I C:\Users\tony.tsou\Desktop\AmT #
#                    RAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\.. #
#                    \..\Libraries\AMT_Drivers\sii953x\component\cec_manager\ #
#                     -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\Dev #
#                    Code\2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Driv #
#                    ers\sii953x\component\thx\ -I                            #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\ipv\ -I C:\Users\tony.tsou\Desktop\AmT #
#                    RAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\.. #
#                    \..\Libraries\AMT_Drivers\sii953x\component\osd\ -I      #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\cec_switch\ -I                         #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\component\cec_system_audio_control\ -I           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\ -I C:\Users\tony.tsou\Desktop\AmTRAN\Pro #
#                    jects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\..\..\Lib #
#                    raries\AMT_Drivers\sii953x\driver\audio_mix_drv\ -I      #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\sii953x_drv\ -I                           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\cra_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\matrix_sw_drv\ #
#                     -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\Dev #
#                    Code\2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Driv #
#                    ers\sii953x\driver\nvram_sram_drv\ -I                    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\tpi_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\audio_rx_drv\  #
#                    -I C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevC #
#                    ode\2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drive #
#                    rs\sii953x\driver\repeater_avr_drv\ -I                   #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\gpio_drv\ -I                              #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\tpg_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\cbus_drv\ -I   #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\cpi_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\arc_drv\ -I    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\driver\osd_drv\ -I C:\Users\tony.tsou\Desktop\Am #
#                    TRAN\Projects\15_K2\DevCode\2\Projects\S4051A\EWARM\..\. #
#                    .\..\Libraries\AMT_Drivers\sii953x\driver\ipv_drv\ -I    #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\hal\ir_remote\ -I                       #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\hal\eeprom\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\hal\timer\ -I                           #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\hal\i2c\ -I                             #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\osal\timer\ -I                          #
#                    C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\..\..\Libraries\AMT_Drivers\ #
#                    sii953x\platform\board\ -Ohz -I "C:\Program Files        #
#                    (x86)\IAR Systems\Embedded Workbench                     #
#                    6.0\arm\CMSIS\Include\"                                  #
#    List file    =  C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\Output\S4051A\Application\Li #
#                    st\TAS5711.lst                                           #
#    Object file  =  C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode #
#                    \2\Projects\S4051A\EWARM\..\Output\S4051A\Application\Ob #
#                    j\TAS5711.o                                              #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\tony.tsou\Desktop\AmTRAN\Projects\15_K2\DevCode\2\Libraries\AMT_Drivers\TAS5711\TAS5711.c
      1          #include "freertos_conf.h"
      2          #include "freertos_task.h"
      3          
      4          #include "TAS5711.h"
      5          
      6          #if ( configDAP_TAS5711 == 1 )
      7          
      8          #define TAS5711_ENTER_SHUTDOWN	TRUE
      9          #define TAS5711_EXIT_SHUTDOWN	FALSE
     10          
     11          //_________________________________________________________________________________________________________
     12          
     13          #define CLOCK_CTRL_REG		0x00
     14          #define SYS_CONTROL_1_REG 	0x03
     15          #define SERIAL_DATA_REG       0x04
     16          #define SYS_CONTROL_2_REG 	0x05
     17          #define SOFT_MUTE_REG  		0x06
     18          #define MUTE_CH1    			(1<<0)
     19          #define MUTE_CH2   			(1<<1)
     20          #define MUTE_CH3   			(1<<2)
     21          #define MASTER_VOL_REG  	0x07
     22          #define CHANNEL_1_VOL_REG 	0x08
     23          #define CHANNEL_2_VOL_REG 	0x09
     24          #define CHANNEL_3_VOL_REG 	0x0A
     25          #define VOL_CONFIG_REG  	0x0E
     26          #define MODULATION_LIMIT_REG  	0x10
     27          #define IC_DEALY_CH_1_REG 	0x11
     28          #define IC_DEALY_CH_2_REG 	0x12
     29          #define IC_DEALY_CH_3_REG 	0x13
     30          #define IC_DEALY_CH_4_REG 	0x14
     31          #define PWM_SHUTDOWN_REG 0x19
     32          #define START_STOP_PERIOD_REG 	0x1A
     33          #define OSC_TRIM_REG  		0x1B
     34          #define BKND_ERR_REG  		0x1C
     35          #define INPUT_MUX_REG  		0x20
     36          #define PWM_MUX_REG  		0x25
     37          #define CH_1_BQ_0			0x29
     38          #define CH_1_BQ_1			0x2A
     39          #define CH_1_BQ_2			0x2B
     40          #define CH_1_BQ_3			0x2C
     41          #define CH_1_BQ_4			0x2D
     42          #define CH_1_BQ_5			0x2E
     43          #define CH_1_BQ_6			0x2F
     44          #define CH_2_BQ_0			0x30
     45          #define CH_2_BQ_1			0x31
     46          #define CH_2_BQ_2			0x32
     47          #define CH_2_BQ_3			0x33
     48          #define CH_2_BQ_4			0x34
     49          #define CH_2_BQ_5			0x35
     50          #define CH_2_BQ_6			0x36
     51          #define DRC_1_SOFTENING_FILTER_AE_OM_REG	0x3A
     52          #define DRC_1_SOFTENING_FILTER_AA_OM_REG	0x3B
     53          #define DRC_1_SOFTENING_FILTER_AC_OM_REG	0x3C
     54          #define DRC_2_SOFTENING_FILTER_AE_OM_REG	0x3D
     55          #define DRC_2_SOFTENING_FILTER_AA_OM_REG	0x3E
     56          #define DRC_2_SOFTENING_FILTER_AC_OM_REG	0x3F
     57          
     58          //#define DRC_1_ATT_REL_THRESHOLD_REG	0x40
     59          #define DRC_1_T	0x40
     60          #define DRC_1_K	0x41
     61          #define DRC_1_O	0x42
     62          #define DRC_2_ATT_DEC_THRESHOLD_REG	0x43	 
     63          #define DRC_CTRL_REG		0x46
     64          #define BANK_SWITCH_CTRL_REG	0x50
     65          #define CH_1_OUTPUT_MIXER_REG	0x51
     66          #define CH_2_OUTPUT_MIXER_REG	0x52
     67          #define CH_1_BQ_7_REG		0x58
     68          #define CH_1_BQ_8_REG		0x59
     69          #define CH_4_BQ_0_REG	0x5A
     70          #define CH_4_BQ_1_REG	0x5B
     71          #define OUTPUT_POST_SCALE_REG	0x56
     72          #define OUTPUT_PRE_SCALE_REG	0x57
     73          #define CH_1_INLINE_MIXER_REG	0x70
     74          #define INLINE_DRC_EN_MIXER_CH_1_REG	0x71
     75          #define CH_1_RIGHT_CHANNEL_MIXER_REG	0x72
     76          #define CH_1_LEFT_CHANNEL_MIXER_REG		0x73
     77          #define CH_2_INLINE_MIXER_REG	0x74
     78          #define INLINE_DRC_EN_MIXER_CH_2_REG	0x75
     79          #define CH_2_LEFT_CHANNEL_MIXER_REG		0x76
     80          #define CH_2_RIGHT_CHANNEL_MIXER_REG	0x77 
     81          
     82          #define MASTER_VOLUME_MUTE 0xFF
     83          
     84          /*---------------------------------------------------------------------------------------------------------*/
     85          static  byte m_PwmMux[]={0x01, 0x32, 0x10, 0x45};
     86          static  byte m_InputMux[]={0x01, 0x89, 0x77, 0x72}; 
     87          
     88          static  byte m_master_vol =0x16;  
     89          static  byte m_Drc_ctrl[] = {0x00, 0x00, 0x00, 0x00};
     90          //L/R DRC
     91          static  byte m_Drc1_sofrening_filter_ae_om_LR[] = {0x00, 0x00, 0x94, 0x43, 0x00, 0x7F, 0x6B, 0xB9};
     92          static  byte m_Drc1_sofrening_filter_aa_om_LR[] = {0x00, 0x00, 0x4A, 0x37, 0x00, 0x7F, 0xB5, 0xC5};
     93          static  byte m_Drc1_sofrening_filter_ac_om_LR[] = {0x00, 0x00, 0x4A, 0x37, 0x00, 0x7F, 0xB5, 0xC5};
     94          
     95          static  byte m_Drc2_sofrening_filter_ae_om_LR[] = {0x00, 0x00, 0x94, 0x43, 0x00, 0x7F, 0x6B, 0xB9};
     96          static  byte m_Drc2_sofrening_filter_aa_om_LR[] = {0x00, 0x00, 0x4A, 0x37, 0x00, 0x7F, 0xB5, 0xC5};
     97          static  byte m_Drc2_sofrening_filter_ac_om_LR[] = {0x00, 0x00, 0x4A, 0x37, 0x00, 0x7F, 0xB5, 0xC5};
     98          
     99          static  byte m_Drc1_T[] = {0xFD, 0x2D, 0x26, 0x01};
    100          static  byte m_Drc1_K[] = {0x03, 0x80, 0x97, 0x00};
    101          static  byte m_Drc1_O[] = {0x00, 0x0D, 0x16, 0x90};
    102          
    103          //__________________________________________________________________________________________________________
    104          static void TAS5711_initialization_C( void );
    105          
    106          static void TAS5711_Master_Vol_Mute_C( bool enable );
    107          //__________________________________________________________________________________________________________
    108          
    109          DAP_C_CTRL_OBJECT DAP_C_ObjCtrl = 
    110          {
    111              TAS5711_initialization_C,
    112              TAS5711_Master_Vol_Mute_C
    113          };
    114          const DAP_C_CTRL_OBJECT *pDAP_C_ObjCtrl = &DAP_C_ObjCtrl;
    115          
    116          /*---------------------------------------------------------------------------------------------------------*/
    117          void TAS5711_Center_DRC_enable( bool enable )
    118          {
    119          	byte Drc_ctrl[4] = {0x00, 0x00, 0x00, 0x01};
    120          
    121          	if ( enable == TRUE )
    122          	{
    123          		Drc_ctrl[3] = 0x01;
    124          	}
    125          	else
    126          	{
    127          		Drc_ctrl[3] = 0x00;
    128          	}
    129          
    130          	//DRC 
    131          	TAS5711_I2C_write_n_byte( DRC_CTRL_REG, Drc_ctrl,4);
    132          }
    133          
    134          static void TAS5711_Master_Vol_Mute_C(   bool enable )
    135          {
    136          
    137          	if ( enable == TRUE )
    138          	{
    139          		TAS5711_I2C_write( SOFT_MUTE_REG, 0x07);
    140          		TAS5711_I2C_write( MASTER_VOL_REG, MASTER_VOLUME_MUTE);
    141          	}
    142          	else
    143          	{
    144          		TAS5711_I2C_write( MASTER_VOL_REG, m_master_vol);
    145          		TAS5711_I2C_write( SOFT_MUTE_REG, 0x00);
    146          	}
    147          }
    148          
    149          void TAS5711_shutdown(  bool value )
    150          {
    151          	if ( value == TAS5711_ENTER_SHUTDOWN)
    152          	{
    153          		TAS5711_I2C_write( SYS_CONTROL_2_REG, 0x40); /*Enter all-channel shutdown (hard mute)*/
    154          		vTaskDelay(TASK_MSEC2TICKS(165)); /*Wait at least 1 ms + 1.3 กั tstop (where tstop is specified by register 0x1A).*/
    155          	}
    156          	else
    157          	{
    158          		TAS5711_I2C_write( SYS_CONTROL_2_REG, 0x02); /*Exit all-channel shutdown (hard mute)*/
    159          		vTaskDelay(TASK_MSEC2TICKS(165)); /*Wait at least 1 ms + 1.3 กั tstart (where tstop is specified by register 0x1A).*/
    160          	}
    161          }
    162          
    163          static void TAS5711_initialization_C( void )
    164          {
    165          
    166          	/*3. Trim oscillator (write 0x00 to register 0x1B) and wait at least 50 ms.*/
    167          	TAS5711_I2C_write( OSC_TRIM_REG, 0x00);
    168          	vTaskDelay(TASK_MSEC2TICKS(50));
    169          
    170          	TAS5711_I2C_write_n_byte( PWM_MUX_REG,m_PwmMux,4);
    171          	TAS5711_I2C_write( PWM_SHUTDOWN_REG,0x3A);
    172          	
    173          	TAS5711_I2C_write( SOFT_MUTE_REG, 0x07);
    174          	TAS5711_I2C_write( CHANNEL_1_VOL_REG, 0x30);
    175          	TAS5711_I2C_write( CHANNEL_2_VOL_REG, 0x30);
    176          	TAS5711_I2C_write( CHANNEL_3_VOL_REG, 0x30);
    177          	TAS5711_I2C_write( MASTER_VOL_REG, 0xff);
    178          
    179          	TAS5711_I2C_write_n_byte( INPUT_MUX_REG,m_InputMux, 4);
    180          	TAS5711_I2C_write( IC_DEALY_CH_1_REG, 0xB8);
    181          	TAS5711_I2C_write( IC_DEALY_CH_2_REG, 0x60);
    182          	TAS5711_I2C_write( IC_DEALY_CH_3_REG, 0xA0);
    183          	TAS5711_I2C_write( IC_DEALY_CH_4_REG, 0x48);
    184          	/*Exit shutdown*/
    185          	TAS5711_shutdown( TAS5711_EXIT_SHUTDOWN);
    186          
    187          	//DRC 
    188          	TAS5711_I2C_write_n_byte( DRC_CTRL_REG,m_Drc_ctrl,4);
    189          	
    190          	TAS5711_I2C_write_n_byte( DRC_1_SOFTENING_FILTER_AE_OM_REG, m_Drc1_sofrening_filter_ae_om_LR,8);
    191          	TAS5711_I2C_write_n_byte( DRC_1_SOFTENING_FILTER_AA_OM_REG, m_Drc1_sofrening_filter_aa_om_LR,8);
    192          	TAS5711_I2C_write_n_byte( DRC_1_SOFTENING_FILTER_AC_OM_REG, m_Drc1_sofrening_filter_ac_om_LR,8);
    193          
    194          	TAS5711_I2C_write_n_byte( DRC_2_SOFTENING_FILTER_AE_OM_REG, m_Drc2_sofrening_filter_ae_om_LR,8);
    195          	TAS5711_I2C_write_n_byte( DRC_2_SOFTENING_FILTER_AA_OM_REG, m_Drc2_sofrening_filter_aa_om_LR,8);
    196          	TAS5711_I2C_write_n_byte( DRC_2_SOFTENING_FILTER_AC_OM_REG, m_Drc2_sofrening_filter_ac_om_LR,8);
    197          	
    198          	TAS5711_I2C_write_n_byte( DRC_1_T, m_Drc1_T,8);
    199          	TAS5711_I2C_write_n_byte( DRC_1_K, m_Drc1_K,8);
    200          	TAS5711_I2C_write_n_byte( DRC_1_O, m_Drc1_O,8);
    201          
    202          }
    203          
    204          #endif 
    205          


 

 


Errors: none
Warnings: 1
